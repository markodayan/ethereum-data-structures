/**
 * Serialising Legacy TXs vs 1559 TXs
 *  Legacy => rlp([nonce, gasPrice, gas, to, value, input, v, r, s])
 *  1559 -> rlp([chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gas, to, value, input, accessList, v, r, s])
 */

import { rlp, toBuffer } from 'ethereumjs-util';
import { utils } from 'rlp';
import createKeccakHash from 'keccak';

import legacyBlock from '@src/junk/blocks/legacy/10467135.json';
import legacyBlock2 from '@src/junk/blocks/legacy/12964600.json';
import legacyBlock3 from '@src/junk/blocks/legacy/12964800.json';
import eip1559Block from '@src/junk/blocks/1559/15122054.json';

function serialiseTransaction(tx: RawLegacyTransaction | Raw1559Transaction): Buffer {
  const is1559 = Object.keys(tx).includes('maxFeePerGas');
  console.log(Buffer.from(tx.input));

  switch (is1559) {
    /* 1559 transaction */
    case true: {
      const { chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gas, to, value, input, accessList, v, r, s } =
        tx as Raw1559Transaction;

      const tuple = [chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gas, to, value, input, accessList, v, r, s];

      return rlp.encode(tuple);
    }

    /* legacy transaction */
    default: {
      const { nonce, gasPrice, gas, to, value, input, v, r, s } = tx as RawLegacyTransaction;
      const tuple = [nonce, gasPrice, gas, to, value, input, v, r, s];
      return rlp.encode(tuple);
    }
  }
}

function calculateTransactionHash(tx: RawLegacyTransaction): string {
  const serialised = serialiseTransaction(tx);
  return '0x' + createKeccakHash('keccak256').update(serialised).digest('hex');
}

function calculateBlockTransactionHashes(block: IRawBlock): string[] {
  const hashes: string[] = [];

  if (typeof block.transactions[0] !== 'string') {
    block.transactions.forEach((t) => hashes.push(calculateTransactionHash(t as RawTransaction)));
  }

  return hashes;
}

// const testBlock = legacyBlock3;
const testBlock = legacyBlock;
// const testBlock = eip1559Block

const calculatedHashes = calculateBlockTransactionHashes(testBlock as IRawBlock);

// console.log(calculateBlockTransactionHashes(legacyBlock as IRawBlock));
// console.log(calculateBlockTransactionHashes(legacyBlock2 as IRawBlock)); // Not entirely correct...
// console.log(calculateBlockTransactionHashes(eip1559Block as IRawBlock));

// const tx_0 = {
//   nonce: '0x72',
//   gasPrice: '0xcce416600',
//   gas: '0x5208',
//   to: '0x3f312809d11c30fa853852554a80a2b78bed4629',
//   value: '0xb8f691629e68000',
//   input: '0x',
//   v: '0x26',
//   r: '0xbc75b2540e2927b943acb6f4a5f655b029a3e945a3caa78ca414764edd12fbae',
//   s: '0xbe0b198bfab295717fe032885a3dffbbc9f13057e31b0094b8a3010028dd5eb',
// };

// const tuple0 = [tx_0.nonce, tx_0.gasPrice, tx_0.gas, tx_0.to, tx_0.value, tx_0.input, tx_0.v, tx_0.r, tx_0.s];
// const encoded0 = rlp.encode(tuple0);
// console.log('0x' + createKeccakHash('keccak256').update(encoded0).digest('hex'));

// const tx_1 = {
//   nonce: '0x119f10',
//   gasPrice: '0xc7d317200',
//   gas: '0x30d40',
//   to: '0xdac17f958d2ee523a2206206994597c13d831ec7',
//   value: '0x0',
//   input:
//     '0xa9059cbb000000000000000000000000a10513c55eff17afc2ddbad23e13dfe282a6166f00000000000000000000000000000000000000000000000000000001289219f8',
//   v: '0x26',
//   r: '0x407411b03652221a0742ad44911ef7902b3796e02b4a0a5ed86a303143c375e',
//   s: '0x4b0e48ae0d7bf50de71a81bdb9b2ebc42b46b9431971d3b44623cc1f34585a34',
// };

// const tuple1 = [tx_1.nonce, tx_1.gasPrice, tx_1.gas, tx_1.to, tx_1.value, tx_1.input, tx_1.v, tx_1.r, tx_1.s];
// const encoded1 = rlp.encode(tuple1);
// console.log('0x' + createKeccakHash('keccak256').update(encoded1).digest('hex'));

// const tx_2 = {
//   nonce: '0x0',
//   gasPrice: '0x867811085',
//   gas: '0x5208',
//   to: '0x62167b1befcf8834066479118f90d3c0e861ef71',
//   value: '0x7f0a19fb6235d8',
//   input: '0x',
//   v: '0x25',
//   r: '0xae3bf1d5ad81567b36451b1196d97c008819712c48d6b7eed9ea6d6256612e3e',
//   s: '0x5b11aa591886a852b4fdf2c912406bf21af5fbee0c6a8abc29492774a8ba1e84',
// };

// const tuple2 = [tx_2.nonce, tx_2.gasPrice, tx_2.gas, tx_2.to, tx_2.value, tx_2.input, tx_2.v, tx_2.r, tx_2.s];
// const encoded2 = rlp.encode(tuple2);
// console.log('0x' + createKeccakHash('keccak256').update(encoded2).digest('hex'));

// legacy block - 10467135
const transactionHashesFetched = [
  '0xed890b43e016ab30b141545be36170c1b72e3d3a5a9e25c558d67e561e455e1d',
  '0x038898d9291c610cdd8518fa77293c80a0bfdfcb47e2de66f7e7ccda587b56bd',
  '0x995b77cbc9df1c38f4aba7bc7e1bf017b4a65a93e73b0971ac9d3c36d95e5d2e',
  '0x8ce9c464339c78121137495aa77b57e6e9e56ab30cfeee5e534fbdff974bbfbb',
  '0x1d973c4efac0ce4350f400228f70c000e2c5d853a89f3eb7cf5bc6e3ffcf8f73',
  '0x90bcdda021ae06016dc31f25714fc7df5a97ef08808738274cc4d8bcf3401f8a',
  '0x3e2f056158a866c1f14c3f7ab096e5b5fe4b97073501e2d3d788362cc97c5e54',
  '0x356eef878ef48f0dd82337c8f7bd3d8f67aa61c1e2486780e77e56ee753a930b',
  '0xbe1016e48fa252a3438bfdcb3e4cc8de59295f919e8bfd3b42937b7916bd032c',
  '0x282ad65d2628916e5468a398be9055d932cd5da7f9c018deb0644d8670afcf97',
  '0x11ade851167e55467875a9dc2f8a046948c4015d9a48ee4cc026ddc386da4dc7',
  '0x420db20d595139e907752702df43f84ed9a95d82bf04a61fafa8b5754d78895d',
  '0xb1164ba5a578add10f564b57ae1f69b8587ecd8debc2558c4aa84021ca843271',
  '0x50ee340e8263789e21508ed431c68270166c1bf2b60324387517506ddd58d528',
  '0xc6bdb5c4b9c26bbf90574380fa00e0cfe2e67d87867e492030378fd1c5638b36',
  '0xb3929042af099399ae8ec903845fb75c8ba5debfad272a2bf33512bc176cdb89',
  '0x5bb8f1b29e411d010804b18d1852f8e11d6b474bce56b5b0a34f0f5ac152e47d',
  '0xdb4e20861a1e5eca504c1df73948d12352588d85ae8bbc4e8da8597d487b3886',
  '0xd6957fe23c6076aaa4b620367be8615614f4a9647aecf864f4944f2fcb5b259f',
  '0xeba641839274af636105bf8cd512ab0d95e6e4e2957e112f3bd6311dc6840ac1',
  '0x1fbddd569908fc52d9a8410864f0bf0b9ceb3a1fd9b87d531e58d2bb68d2f36d',
  '0xb311b015ed405bf40dc55cf06063984e6de733ea21a4e49d9ab7afa3189cc719',
  '0x54c8f5b41506a3d8ed6db93613c3f7a8fe4211a40fa173390d243bd063a7ff0e',
  '0xb886b6ab7bd42f5aff536db1dad427246e91f10648813b36cdf68215e7e09c14',
  '0x83c1165db98f24f655860c2e016eb42ffc076fd07d86219afc44e9e5abca5723',
  '0x7c9bd623e1135ded4b2d4811af1f73525f3729ce204996f2861f0de9cdf2663d',
  '0x60749096b0ceeb95a87287eb8f9b70da815a649d3f094e32c3ecaebf6919d01b',
  '0xb162761c46289b6fb6f0040976de8ef564d66b07e33a9c79bfb9e97f88a77463',
  '0x869211eecca8ee6f3f328f332577c32d81625fb247cbc14041dd35379ae9712c',
  '0xf665d21c0be405d76b98865220a62ec949da5d1a5639f04587aabad1be856b9a',
  '0x79c8a3c922e1f379754b0ff5312b786c0b82be7644d5b6e238bc08fe17c484ef',
  '0x7726caafa6be709214925054ddb1eb03683d998aed4fdd18bc6234991be8bc2d',
  '0x03a933cd346b73ea0341333b9c2d31636f67be7d1ada6b6c2e15063c3a2ddda0',
  '0xa1ffd1e62c1973f1169b1e110d6a24ba0bc3af44d89cb8113156245b226b2cec',
  '0x6d2e2eab06e62d758aac84bcd910a004112ec33884b6c30f57268f8227892e43',
  '0x5dba0df6bdce4f115930d1d3228ccc2d319a8f7dc860ace17002c034ddd76881',
  '0x1c17fb37ac03cb8d4a2ea7e7b01bfc59271ef8b55b16719931d7c5028d8872a6',
  '0xa497292b21831ecf5e509039c4e96ceeac2f7374449eff5039b0c1fab8a88924',
  '0xfbf1ba8b23cbded0848d03708a70d5ba8d0e176637d75f6c97f8968c9889ea4f',
  '0x9f93426e2bbd90accdb5d2cba802604cc7fc5efb8449fdad051581905f2f6a1e',
  '0x8a0f29311b3770404713228e8efe67cd3464e5fc42846825aae464b1b7fc5ca3',
  '0x1d6668149817cf95d3536aa75c3708c21ad12e72ca9646c7fff7e3919b020999',
  '0x374a44c16c751cee2bd52dfe6778c6c6c2f8b227737b78f5fac1abfbb285babb',
  '0x9ed39b6da47d49e7f4a751a63d15f874aaf49064d8a570ad75265bd55e667ff4',
  '0x023613da772cfed05756d37963189ded3c680e08226b9fb6b6725902203bf27e',
  '0x2ae806e2ee19e2242036b0f9cc6d075e31cf44f72ae78130ded79c7f01d1714d',
  '0x0af50226867aab6f9e1112687aeecaafd555eae68ee351571e9a6f5d644ecf6d',
  '0x118d1c10cd92841557fc839b697e6ae60b5299ecb3ada276445b8529998c9d7d',
  '0x3923fc32a8610e20ab2377ad5f59ef79cf1a1c21c0bd7f93a38ae461f69a1c7c',
  '0x4200ddf9f3f968ba1d97fc18f0b770a5ccae9d90670b57e0938630a9d098342c',
  '0x86baaf03a607dad4b06822662de1e0208c41b1ce9c0d6209878e9039034922c1',
  '0x7577967f0b735c42155f29f45d38d40171f9d10df3fc6dbb245fff3a409ebf62',
  '0x66b725c35efa86cf17ad1649fb083e94248c0e0dc48451259f3e2b3702f12c15',
  '0x33114d5b449bd8d3768259727fc50ca5c976a0820fb3b9bf621fabb0c41ccc79',
  '0xe7fd472b9b687953bc8424a53ef674d7428e93022c618b2687aa1ffd5394fc89',
  '0x578500a71dfcc4fc92f4d7e03f22c1a1a60ced3e79bff0b773f79724e1578be7',
  '0xdd9fc06d07cd7daa3d34cca676c1d4a5c429207c4e0df4c39f5ba245b724571f',
  '0x7b9f65a82453ba8514eaa207d8c13db1297ce8f735ad7ea73381d97c534a8a06',
  '0xc178223ee72542b4f3d3c74a2f520620611d60833285d6690bd660829b3b4aa7',
  '0x708ef866b86475e45a8c32cf1215b426a14793d0d8da484a2191b9e8099bc3d3',
  '0x5775684eb7f9f6329b7769146f42d2fffc174dbf1673347223a3bdeb80368b7f',
  '0x3ecbafbcc0dc9d5bd9f2d9dd276bb635e1b57d7fd8610f4c40ec6a354e9feb6e',
  '0x8b2be101ccf36f1b61c1752bd161622afd6fbd2961e2eba73795e3f6edcb3f94',
  '0x3e2aa5b7877ab5f1dab5519ff56294d7eb6a3b0cb425c3831c1890ea60f5b73a',
  '0x74f3a3196ee031b9d1949a9459785e30eb7572ee362c480ffff1c4de780eb47e',
  '0x9e944987302ae63aaafa622b39064956c5f3043486026bea0a9c4869da53c12f',
  '0x0f6607f0512b749852e437e82ec2bed4c0ee52177481a52ad38629fd478b5360',
  '0x3e2e352de1e01abd1a88945787850c393b0e29961c12e33c9d838cfa6784fdfc',
  '0x76463bc331224badccc8f6c718a2cf9e0e4e7dd78ccf2e3188db3a976146ec0c',
  '0x36e10f749fc5eb31d68a3b4dba883cca95316853fd4cb197dc325e2a215c7d80',
  '0xa71f93f12ff5a4388430ca7d97a3f1940487b2bcba1bfcf72a7c2e52313a982a',
  '0x68f8d30461a9049d05e28942e32f31be1f32462825230c2c9ed991c2cb5ab948',
  '0x185ba2e389dc063e3c5f7397155f8fce639a7b9c639c7d227bb363e7f41c6b9d',
  '0x682d7342815137a913919e6ae3c44899e99ff68878a18741eaee8d627948fb48',
  '0xda7b38306fe16749e5436991abde73c38f3d07a598441c8c8f84c5015a8893a9',
  '0x89ed9e04d3ffe02eaa7ba7f786e39687df894bc3988a47711e490919514a9dc1',
  '0xf47e1ce00f28add05a2a23ff7679bf1f372d36c36c835a948a7c563ad3548005',
  '0xe96b654e0b957811fe7d8dafa470d07f634886bc70906ed405e5cab4f6ad1a07',
  '0xe82431e531c21cfa294268eb5fe385e6ef6dac324b713faad4677bd2f9529eba',
  '0x77dcf0ac61ce1eeb2677306aa0a03d4db7b279de741d1dac20e944ddf20d81e7',
  '0x0598aa8d27a37787e20709ced0ee57bdd0feea1d20098be8a245ebe1b65ca7cb',
  '0xde319550fb7857c464162e9b7195f44f071999bdfbb5ead4eb1384820c48cf50',
  '0xd7ab2bdd9efe37b50d7769f98b314bfe71e887aa06d1c604c1838959e4bf8838',
  '0xd15474e554a29392be9a56192192d4caf8e0ed414ef60118665c3f575a6d0c37',
  '0x1d68969d46eec4b7dacb52536271f85985b6205529ee6f864d593e1184698a40',
  '0xc3f3267dc7d1c385bcde9f4127ffa32a45149e9b993ad2cb43db59cc5a2c7d5f',
  '0x6c144b44ce2bc2f856b4e129021c6814c0d962ac6c5057342e203efe99bb409f',
  '0xd6e7085fbf0743cba644921d57f01e9df9d70bf8c237984148cb7bec9009249d',
  '0x457368ff335115ec0a6bc6a06ee0bf2fcc167f296e1f24e8e46c378472e9c4d9',
  '0xe971eca8c10d333f8df5c1f97eb5fe4b40aad4a97a73cdc65786d2e6a0717d10',
  '0xdcc5491a9a027d7d17a20ee098e5128793cc17cd880d380d93a4a3e2fb1f0b9d',
  '0xd1273221c5a922730777b2f11ba52d8b9d5a11df08dd2c4c7d1f8abeba43a2c8',
  '0xb25c1c106590ad12034a016781b8990a6d82d3670597711cba55cb6ce89f9381',
  '0x9f3d80b18930ff935546f7b3acf6f0027096ba4b0b26bfdd21bc3d5016f629e2',
  '0xc0e5394f4b53751bd79ced37e61e5abcc2cd3be4484166fae5ea324dc9e61f25',
  '0xe1d5086a264a6106b36e6d43b6d2fb5a535278326fcd26e89b9de17a4a5c6ff6',
  '0x9288694c44425fc03494e315125fbc5f15bc96d39d3eb656ab0e990097fc9afa',
  '0x587c5ca43860af72f45e9570491c406249dbd242fd39f91660408dabb5e4c037',
  '0xbadcdeaf2f7075ba303a731b871fc6748e72289629227a6984f984b09850c887',
  '0xebf6b1e9825c1db26a9cf8ea0972a1acd8bc06da86b7d106d883f1a8cf751a51',
  '0x14ca3ce79f636c6aba59f93161f65bf241cc338c01f5fc2e4af830dae6fb0e5a',
  '0x3716cdeadd84070c50955230da2e44a55d25860687a910c8184e662122d4ca98',
  '0xb84bddd7e6f8405f0d4da79fd5cca2b82b8c1d1bb49dfa0ae7875c2654b2b3d1',
  '0x362528a4d67313d35b6ed4f53372ed640d8ef5dd5f2caa453ca24ba944f27b4b',
  '0x787c0c18351df5edcea5dc8502794b1a9e7232c1acc4f332b653951bbc029ae6',
  '0x2bf1cfd66842a7c70ec92ebf890e3f8ab6dd0efb0cde6d1970b81ee05a238f54',
  '0x1fb9a5ffac1ed5865a404654ebd5649183be46b905e3ae654e69a2fcb9986d6b',
  '0xb055867dbf7872a7f7f53f8a5492b05acd090ab8cc7bf1658a8fd52549501396',
  '0x07e1f522ab379fb36213434b56974de9dd01eca56ddce49fa5fc7ef320c37e33',
  '0x01539effa7ebe34f9845588d6e767410964b716dfbba05fd6b531969caa157d3',
  '0xf37dd16b5f2673ee2bf9d3b5c16a742d07fa59213defcddc7e53e3b34861ee82',
  '0xc33aa2bb4e44f8815285644beece35fff60f3bb375226a61cf646675cd81df01',
  '0x94d008328d7975cd1ddae0f75415aa996b1dae99d80f7f94f8c725594624c31e',
  '0x65db7e94df33b01d8e3a46d4e1ea5014995c610e53670c9b5cdff4a5d68c84b4',
  '0x16bd71754c8e57232cd518a911831eca085adf0d9930c62d3b3e46376cfc9316',
  '0xe3ab80defe3bfedc8f48aa4482f01376cb2caf5a5c595b59b71cb20f8815607d',
  '0x2218a07336b9c098e7de4d78297e48b9524c3bcc9716dce4ed49dc89b43ced49',
  '0x04d76dc8238295e419eb6999e938462d0dce1f19798f4ca7221343eb79d6db96',
  '0xe8ba2553efafe8c6f7c21f4589f645d7b7541fcd80dfb6ef49f177518fce7bbd',
  '0x779bdc9f3e43665a42807d4cca9f1fe520bc8b6b1f21f3db6775bb6c535907d0',
  '0xc8b8b55a7546f187a500e82f9d22026a92e3a650f91118ad10490ac8a3da4315',
  '0x7a553c0ef8f3d340458e702584d96f14e778b5ba627b6b4791cf48cc8a5c5c32',
  '0x5e9496da42e900c652c30116f9eb237917bad8a9df2831677ed5e18e7d59bdc9',
  '0xf492ebaa0b2a9e8ec66a4b4b49eb2028f3d3099463d0c45bcddddfc01682ad5c',
  '0x6be1c7773250a66ddc9f2c24f1c6149eb622e80066d31df18e60305c587355b7',
  '0x2499d796f03409436bd9dd9c67d15ca6add929a9d001a5f87edcb28bc7407cda',
  '0x8e55fbaf30f8f852ea107bc29c72723b2c700a848f639f44bce22ea3fc484648',
  '0x0a7e605b77e8a5a2a01fc292bf59bc3e8b2ed3d69c080e7f1359e67472e002e9',
  '0xd8da89592e33f9bfa967b225c0d56af7bcbc7a183f46eb925f1093f732fdeff6',
  '0x632191349ac53cd149bd7057451fa70dbbbe1c750792106fb5786c68a064841f',
  '0xe09c3a4dc16df12d6769a77780b18585172599706d51564901bf60cb4e3834c9',
  '0x5373c9b84281a99d168152f31ec2ccbe4647c595fff3a08afa265249365eb2c6',
  '0x38d1e2de03631fa2d9bd42f90449e3fbe5e811883d4fc1d42346d5195f77d89b',
  '0xd91917cc2ed95d613c8ebd21c652d658df4093931347a68a4c1d4553f355a124',
  '0x9efb89e58d888cfdd862155e20a7271b4170673241c809e00e1c3ebc8001b7be',
  '0x9cfc53454cab70d29bccc88b31b01ab57f9d7c370e0fd4a87c3ebb9f22c9da7e',
  '0xc39e44d57847a07f385a34fa0396169517371e6a36b44f7dc0c0665985bd6664',
  '0xcc44e2b2da2ae6f95c861efaeaa126696d6c86e3359f93e52aa030658f5752b7',
  '0xce75a441f036c79520cc58ebb1b5330afb5ba95e096446a7780184e8dfb15f82',
  '0x781c4a25717491f122706da7df09a646c6dc2d5200c95f83a900f6b30e6512ad',
  '0xd343437f1f71c77cd8b2f4bc3534d820659eb7e30c7f168a858c8c4a5739304e',
  '0x5dc6c4aa065c51aa894ba2b246292c06577972edd8fa98ac525c5e63bc239301',
  '0xa2dde3c8d938cd8ff54820bad0874432a19fd28a419dfaaab72a422107754543',
  '0xdbcfcbcdf76c5e849ceda432620c909c4ab87342b7060154f855fbdc70dea1c6',
  '0xdf9e2846b79614d61ef05e3e376c3928caca9bc5cebf7143e38bcfc7cbc7e631',
  '0xe62b78efdd0128143dcf7798762b03f01c843cbe0531df79311f78d91e7cb650',
  '0x48ff8dfab8852ae336b2372eb84e32c65cc0429aa4f7e1efdf01c6374ec7eab2',
  '0xd316ea43fc393cfcd2101b0ceb350792ceed450bb6b71d94ea657d3e40219e7a',
  '0xa649d4b938eff605c7e05efcf0a6cfa17a8c3b81445fc0197bf58b6c053df1a7',
  '0x436d597362dadd68222f62d01cf91abe892a6987f5f50efc33604bee4f39bfe5',
  '0x892b51dd05bd4ca151cd1d2d26ea018c1942e157ac0bfe2cdd69e332924fd24f',
  '0x092687f34ac56135e1ba37521e750c2b4925bc165a5f3f5604060b8da9cad639',
  '0xdd89160de76486c39d680cbb62a64aea8840e14faeac1c2fff83d447f6891fc2',
  '0xb6deeea2f72548735dca0c37d93408b4cd3d7ac3b0cdc9f0ac5193b21c77c682',
  '0xaf9838168f23401f5749b7b8c0dd1fdcf60bce9869b4142619802f8889d3a301',
  '0xcdd2e3899bca23b091b832365bd85fbe8a09679d2ad32318c1c90cce93a3ff62',
  '0x8ae7302536fd6be18d1a9f04d56bc0526a97dd3ea8da5cbb182252a431a3857d',
  '0x34b0e878f1a0cdd2bf9c74c82cab872191d37996fb44f45dcfe7d63ed71e1b96', // correct for some reason? (its a contract call but ETH was paid!)
  '0xc221c9a0d18725cb68e60aaa197d692eb016d2b831e901c9eefaab7f945f5c7a',
  '0xa71158227de9252718f32d69acfb51e53e951def81c4ddc25c2d1f4773d837a4',
  '0x0ebb4471dc6e57c94067f1e11edead1121fc838ca2a6808512330e1b61226737',
  '0xbb7dca4c1263ecd7a9bebebf0a707095520aed839886880250d4747142cc9189',
  '0x4c91a7788a1733972db85a8bd71a0d5f84e701f9d5fd67e50e32c6f7bbab63b3',
  '0x911b25c4615977d8fbf8284c4dcede72183a1067d5854abfac9da109169835a6',
  '0x7f6454b6c82dc51fa2d471aba6bbf3886fdac45f4608ad42963a89e84b9a21c9',
  '0x31c65d1e29cd9476391ae00a9e14f3f2540691043d3a45e293deac0219b6c93b',
  '0x09155409864c73055627600743a99bc51b5b773702c8aaa16fcf4245d98be6ee',
  '0x540734411e6c8fd66a438ffd07346917b482666744f690b0fd28f635603f329c',
  '0x27a6affa8f25a2eb9a271dd2876277215d4863b97f95a79c4aecd5c0d2506922',
  '0x02a68d781651e5717e0f485bb6d632988693eef740b949995d8230fffc151ea7',
  '0x58b4dde8416aa7648e022361e29759f073e2e30814bbf2d2068a179d89b2515a',
  '0xf03bf0a207afe9039c609454b361e777f8f55d190fab7b9766a3deb67891d11a',
  '0x44206e3bb210b871aa9614ee92b706eda88977f0c08a416ccee91e3f91265633',
  '0x53dbcb0f10c6b80c805faca19d87d07bc741e0fd3d75f83d2749ecbd82524cf0',
  '0xd13686d2fd53d6210f782c2ac0868fd3ba4439519d2562e1d4608425e57045e0',
  '0x0fb5c3a99c2217222cf435a9653ea48311c4b9886e6527282f6a2e560bb75bd1',
  '0x56a6060ac55b37f851b99d71c6ab51dfbaadd52e7cbfd6cb02ade53d98dec536',
  '0x774888f7e24adcbc08d1c32f88f52bcdd5ee6a374d1ea580fd2aae3bde7f3fee',
  '0x1f0b0f90e0e0c72ea163f4079787fb0c9a404bcb5857060cb596e725ba66adae',
  '0xfa8f9c64ed846824b782a8836709024f133374cc7b2b6356e7adc9ce381f238f',
  '0x4e7c9269408ec8c17666dd7c9c828624b9afd5b3f4e27ed55a223460a5f3bcac',
  '0x6a168158a6e22b901267ef0ff2ddd09af4a8289c890c406f399b0fd26912791b',
  '0xe9bff0ad7ba5ee4123496a82859f346c89bda70a0142a8832f74ef7a425d8084',
  '0xdd3ba1b7d954d91252a7a446307ab326026b59fc2e73b7a24e07213bb2fab590',
  '0x202674f48e0f703e2ad0dd156b3351d8e2d1826c52f9cf0f42fe563c01df773a',
  '0x16128aabf5285ce24f3700b9ffd1076da3993fe0a5dc7bad048a59512cba6aff',
  '0x07566100cf9d95d6b1dfb256055b7725cac8462c3a50bd560862617120cdb0bd',
  '0x2196fdf82883a4883a384ed0e9c619e465286e5b6b624ad29e041aaa1e7b7c94',
  '0x85a9eb613ddc7bd9d017a33bce4cdfc761067530cd66ebec6c574c292ca9241d',
  '0x84b1381e9b450e0ca15fc6f615d8e509762df6a3fee831732437cb7af7a9de57',
  '0x9862c8909b4bd503f8cbf43e364f8392b06b152a82ca8e2f23ce406c964a8927',
  '0x5a2b8660dc88472813163a3667126bc3e657cbdea51ffb5d844af6386f6f9007',
  '0x17b00a4d08267412cc08dbae78d9f6ede595cb3c5a518746b0fba7118db65f44',
];

// legacy block = 12964800
// const transactionHashesFetched = [
//   '0xf91eb695ad4c320575f67aae63e9f1bc67578434db654aafe0348435f8902b90',
//   '0x028388f8f5119a06160c2bc8e11fcf04c1b55f0f1770381907dde015dc3d1405',
//   '0xf8762ed4c7100f240f7f48f3ba80067d520d4a681d8932fd10ffd4d707ed099c',
//   '0x284ca75403b02b7cde554bcd621d7703e8236e598d0062817ed5d46d6d313263',
//   '0x97919d79081baeff5ddfafc26893a65384b224777a946341b44c6de143adda7d',
//   '0x588232d8e4f14744128db5e3e2ee01ee7bf6ebd25eb8f832f2c49e3adec8154b',
//   '0x214c91d70e2541cda5baf661fc990ad5be148310dbcdeee086b3ce318516fd77',
//   '0xdf5d2598e388f2cd4fd4c93a464ceb4a59c4ee6686a79f9814ecfbcbb377a8a9',
//   '0x6397740ade4d026da750eac6c13ee8a989a1313d2e2c38520bac0e983d58cfe6',
//   '0x0953e8300b1fe568f1f5114c81b756a576ec7e3b106386d45f04f6e1a2c455b4',
//   '0xd6abe99202db1b1b5af4202e57f836f998128f3664dbd5e64f9ce87bd37e5021',
//   '0x40f852916a223797225014ce153f5dbfb8530ba0447ede9980fcc1bdc5a28954',
//   '0x80126a70c7f940cc7f62536690155e0edc645efa79d22ee42b8a230713d08ead',
//   '0x91bf5f2fc0394ea640c652a950964bdb0fb821b02fbd8a93332fd6377f41ac1c',
//   '0x6270ebaa3c8123d930011a2235857e30728947b20acd21679940ea3e73e0ea2f',
//   '0x5a45a5fa1bef784b9de084093b7b20a38b28dc0fcb6dadc0e0ecec3e1a2ec2f8',
//   '0x33e4f5744d2c6bfbfd969f4b7217c1738776d08bb6e6012e1caf34849f19dc29',
//   '0xffac15c12cb21e200555b93b3667ca2cc93bb68a4ed061723da7774cb373c149',
//   '0x25b76ca652d313884bd17f227ac1e0484ba8e721a6677d30ef79cd2b3062291d',
//   '0xd000400283418da9f8f69cdabc83309249ed010b88091ee247a57e0e4a4dbdc1',
//   '0x16d9158949883c27b99aaa1fad9fc2528302f107fedbeb91fdad3c6a90f9d6a3',
//   '0xd357db345eb11e57e0e7b494fd676978b37790f4fac5a8536069f5f0dff49500',
//   '0x241c7f6870c1ac9623739a8252b607facccd9f44f5fa6e3fe6cd5b90e1864ceb',
//   '0x9c1a4d140b17977f0cad6c39b5cef8b8769cc087f403ff86cdb621890a8511b1',
//   '0xbdff91412c1ec25ea251f12dde5f3b2b84bd360bae1c1821da82cc2b5fe6bec5',
//   '0xeab0fd181079f2d7799e1a9c32a2b378cf66d7b101463ee1c89fcc1a6aa0347a',
//   '0x600ac4443e399709e8276d6aeecd3b93d1d4a72b85873716ecaaed19ca5dd721',
//   '0x6a48894d325e166ab5f31a1a70f807d29da6c2ecaf8d469de17f8e129b905c1b',
//   '0xe3b82545238665ef98c024e2a4fa29853f5c3d1b0425306cf794635f7ba9da95',
//   '0x651f4b1765b6adc527c13649a8954cb1c9df005078e12bad4eb18078f0f8065b',
//   '0xe8939f9c9b4ad9d265be80ad4377859314e6a321b204d2e34edb017d70eaecf3',
//   '0x4dc499a22bbcdca0bc9f45c3b9d77f1190d48f03881c7cf5fa6de1297de0174a',
//   '0x9b1c7f6b2820f893f42a80da74d83a9a08da43c085ce7febf603c41e5d125c08',
//   '0x6b994af8a8ff2f19d1d855196262296da7fba5de83e2fd212a79229fe999108c',
//   '0x2509db116bb7a29db88b75a53bad30c715fda10d5e36293a74819e3318063851',
//   '0x168c5d5363767fba22dd035353f99575f01a91f3391d19fbbe3bc65bdcc97fae',
//   '0x342ef06596c1d730808c5574697962c5c1f31f14460fc1a1634c8f53dd7a9f5b',
//   '0x2714c426916fd08c12ed916b9483ea6b2a758bd131fca1b5c3769c8f07bb0b94',
//   '0x039414a530bed104592e1e1a184215e88d9efb2ab978128a29b27851d8a071af',
//   '0x9dcba8cc0f45ec74456dd82bf78d81d230529f83014877a0e9ba4117d6017af1',
//   '0x08db6af9d7b63e19df9c812b2e3e45799632054cb056c3ba7ec4a0cc3db4f67e',
//   '0x7d930d5d8e74a1c3fb66404a05129a3f53a6ccea0a1a9ecfe713fedafa16be16',
//   '0xa527acff01968e67e3e6abe13e4aa3ad405b01850df5fb795ca977fc5847d4f6',
//   '0x8dc4a7cbcc78e4c97b91f52378448ae287d137e9533889341d26cde4e03610fe',
//   '0xf6527fcc6f69af4ff8d48cfc89333da0ab90401fd7ed4abb5fa927cf563a18f4',
//   '0xa81f16de72cbbe84c6b1f592f1451b8c92c26413ec07913029f2bd7b016e5d8f',
//   '0xde58e62714d6e0a9874b7e70a046656a39fd179d8e91803f131366ec7842d9e4',
//   '0xfe7f4ceb8881ed715313b72135832b5d76e47a750701ffc863e46d4d886b3d22',
//   '0xbc7d90d8d5aa6d86fc819ba73c15e5fd63ccbe6671a725089554a82091cd7ae9',
//   '0x6d9238b244e0c3f78aa3bc7bb0d503ba4b6a1762855925a9dce63a785e16a29b',
//   '0x1acb6d84e119a55e717157451236a87243eac6b252c02b158d08d47be6affa30',
//   '0xd3400071a6feb988ed1412376b4c13906abb9ada758ada9d88668755ec9c41b7',
//   '0x68a173e16a7a2e5760c23d20137fdd0f6cbcac11151c3b2562c18ec6ae5ce75d',
//   '0x8b8a00a73e2e564d2ad01843840f43eab7322fa7a0df65b21f9d7366cb39dc73',
//   '0x7e1c397cd5319edcbd657b939e5c7072df32bd3d42cb8f047722a699e05fdb48',
//   '0xebe8715c82ad5f5ebf1bc8e59b79cd445cd4cd184a307da7b5bd20ab04033d38',
//   '0x67dafa423c73f3d3fa46a0a61ef4022f3aa7b4dee49edba762424d6f11889e00',
//   '0x7250cf5fc98874d9707785b063f19a8e89e11af0f518c046f3123d69f4d283a5',
//   '0x3fe4bc6b8399fb4f4ac115ace99b1988d439657f12b156d530a99005e95187f9',
//   '0xed91b1dc89da53df81dbd6f95cf55245930d7685c1f498404a0d093b615dab77',
//   '0x065c01976bba0c6b6931b2f1a508d5e22febe27b92c45920612146e914bd7b69',
//   '0x216681b1212cf3658b7f6659fcca75893dc2756d8d6f660650376d6724cc7c1c',
//   '0x75a2a04c7703c732becf625a87bc28f8af8af4df4331d81c6deab3acd77144c3',
//   '0x3c838ff0b51c7164b4f9926fb3d06e97337fea86c7eaf849bd8094b76cf2618b',
//   '0x2de70ebd3383abe79deb4f7a3702927283a15df1f1e3d07167a59bb06841bced',
//   '0xeea9bb6d49a25402e50db6ad67f1ed7c8572477e5e763ed0a6334868dcee5ae9',
//   '0xcff761b4e8a6b801e36812dabdd72e57b464cf9cf5bf1a078423269a5aae1bd8',
//   '0xe982f1227243b0e3c0609dfe6c6e25a4dee6ae8460504e3dc7da861dbc739373',
//   '0xdec5d50bac54bae55694ca9a1b9c633b06c7c7a3441c0e6ef1d3fe06af702f83',
//   '0x26ea3a2eb0b35fa2b15b3f22ff7ddd16e1737ccd864ddd1f51f04de1e0b53e37',
//   '0xb38b5e5aa9edb491e76bfc32d31c1da0774b7bc28028db181fc2a57cd1c635a4',
//   '0xf325bc967f5fbf0e98a76375fd6bc92df32afef90ef767d88ac9feb61aa6984d',
//   '0xb33f3cde0f46c34788982c53a8f43e1acfa47d6beb210dc5604c080d3a2613ab',
//   '0x67a8f7c4eac4ce6318722b4aaa6e547d1379d333fee5f69394beaa051ce083e4',
//   '0x1259a02d9984c3cfc323355d918e4e2dd5e962ceeadaa75a2f1096d708c03039',
//   '0xd8ce61fbb5f0dd95167b6e02263dde052fe9a60db1019c60e859edc3159692cc',
//   '0xd847c1d551183f61541a7d2de996e82bdb9500af38489e00011a7b5401fc9e28',
//   '0x849f7913afd710e95f56b457075a9f7d4fe6dd7cd617f7243a872b6e631746ae',
//   '0xcf812f1a9ef7b83de03f96681af3ce835bfb497352dd5800202b766e20bae1f1',
//   '0xf904466f00a661725a38de140467b9d3bcfdb4736c0dc19253d0827c2ab01b2c',
//   '0x8195d648c992eaf69083c1a2623deaf051786d62d0a059dfdd58da5cb6190412',
//   '0x4ba352eb53677fd3e7ffbbd9da28eab576c6128153fb676a58d4782c909dad10',
//   '0x60f42b38e68ee86cd0cfea65c9e38eaa047b46467b50c3bab35e497c31ddf39c',
//   '0xfa2c05ca6fc3b2e7e143680980ebedb1f9f89ac628512d139c619a44cfedf8d7',
//   '0x2dfb229df07d68aa9b4a717714291518b750576827e5f3319956eb2da3414489',
//   '0x5955852bc730f2c25353fc9bf12d7c0a700517c942f2071c205e86891d859dd3',
//   '0x9e2a9dfcbf3c33290cb4365c68dc3e0e75805d8837a81787117c0663f0495926',
//   '0xb6e8273adc6a0336731a3ead2c97aa3e71e75bbe60b8e1ee5f4f8df18dc1cbba',
//   '0x3a4197b2f6ae44cfe9f6830f8b314b5aa38df3f5604674b990ca6b67741832c3',
//   '0x88282b9f02ffe742cc8a22e026cffee6dee21734dbbd07ef757e6e5d4cf46c01',
//   '0xe431d48d7dea87bd569e670f8b81d975b1f75f4abc07408456ed28fb9f128875',
//   '0x61685505b04779264468f93f8f2fab5d2871c3334a83f4d6209800abd0f7b03f',
//   '0xec76b003490386ebe5a50044477b28fb26f19a77df46fae73d1a63097c812654',
//   '0xfc619646613bca7cab263d3d55010f1e20f953d853f94340b6bc217776da01b0',
//   '0x46a26c50649ff7ff5203c77327da1379864a513cceb2cac46405bdcee8e2e4d1',
//   '0x1b32c9a1db47d809196eb5254cd1e726372444e3cb30d180e54c047d74282f85',
//   '0x099c7909a9e6004fb29697a769236fc08ab309ae1355abdd2ea17d2cba4bfeb1',
//   '0x8df91c0ee11816fec15340b8bbeb4e622063e453f284deee5a188b128ea96860',
//   '0xf3e07e8dbbca2acfd552e691f75bb9004436ad68bcbac75923857f29e1142ce9',
//   '0xb6da0468f1a652ac5b8353cc2ee73632b72b7f7b71c3772badbeff08bb6546bc',
//   '0xe7a9dfa5d8c6a8d45c44e2d665c14ffca1ab233f9246af186ce8607a6ca21d2c',
//   '0x9c28f4bdf9a2cf77f6d50837819efeeeabb172d655a5408996dd4b44dc7ce52f',
//   '0x5e46f61bb394c2900f758bb6118c3ad3e8dfeae5f29717972db768c2a5157102',
//   '0xde677b9e66d287e880cb367e115c42ce2520bd3fbf5103bf62b10fd96c5df863',
//   '0xe8ffe6f51300eb96dfdfcd95fc86a12c65bb4c9f070ac0710d2f1618944b3720',
//   '0x98882660e7ed9965fca4f9898f259e9260c58c28a99f218c059a3c655cd92423',
//   '0xdf5ca89f6e46b46d9ebbb89dc9105e013fbd45fbb42d6ac784224b9eecc2b0a7',
//   '0x49e341e2dfa8aa9bb0a1092986d7c7da3eb691b68cefd50a74ad9111c2537fbb',
//   '0xe10b9a4ebd15e28f02f09c1b8860862efd60cef71fa0310bb6602fcc85e166f0',
//   '0x04bcab9af7a8b68b94145f13c745bc29391ba2bd992c58e788afb8a0a720abff',
//   '0xc05742329e60bfe79472c6200c8a2056fe11ed26bf510ad1e19875c2bd0d2911',
//   '0xaeb0dc8c34d0e936ad5f4bef4bc56848dd27cf081ef237d4bbc38b8b099ca03a',
//   '0x8e1154055057242a6101688de7b12fe818321d12cb740a156aff9e78867fa774',
//   '0x088e79b954b3336cb71064e4d3badc8c03e24697b20dfc8311161535ee8e1c94',
//   '0x8d3659fef4f3d8c9d4cff95dcd81e171a45c66c8e2ad2c2dd36acf6dea17b955',
//   '0x5f472e9b388958a48d17feaa88d9c5953a51489dda7692d97a64a4cb320030f4',
//   '0xf4f198e9bbc1e1551fb635751f5a85ab9cd5d24a53e81534da3597111d9aa25f',
// ];

// 1559 block - 15122054
// const transactionHashesFetched = [
//   '0x5969a597a202fd78712d331292fda3f1d33266e96b919c2c7bbd53fd0a023496', // equal
//   '0x17ce56a5449cd789238ee6b13f94d56849ca6c7e978591ac7a837e6d1fb37b13',
//   '0x4cf96fadcb921cc31baeb038357778c05f993b2ed1126adbe7ea10bcff1fa436',
//   '0xa4300ad307e6ec5c7b4655ceb7ed08a2286f17d240fa432859e6920855b9ed19', // equal
//   '0xdf83d9061a355746e397d6432c08cf8815cef54c8ddcfe55476145fcc48ead28',
//   '0xc425acf7ccde8bd6e9c314eea55fbd7580c07007ff2ca6d7e2948571823189a7',
//   '0x519047b26f2dab127bf5a9afcbdc7cb02de73e3c25f625b4f87bc35698769a79',
//   '0xf0d9a98c9c3526160773118992a7b016a744c267e9f63fe2bfdc2d8045f9e8ff',
//   '0xeee3f91087b5c59d844119bb19c829f809816b0001f2ff2ab8fcde6f8f5cdd9e',
//   '0x60e86fea98e7e957f78005ba8ff79f00fde72beed57b20a6c7e85edb3999fec5',
//   '0xcd1cb881e4f8b11848c49d97c9a0bfc860baef532b354723bd911a8212d2e6f5',
//   '0xec6dfcef433399b3d8337b8b156b8447bc7b191708b64202ce0905c658951a2f',
//   '0xdd6ca1c1a3e35a9cc6940b32a8f05c42281ee51053ac2ff5280794d5ef9d094f',
//   '0x6683f7a7984511e7ebbc2d511d2e9d3742a65114f4d11615025abef13f2a9804',
//   '0x26356664852e75b7e8087e27ecb5ad341a9b5a559a2b6ab7844ffbeb8245d0b5',
//   '0x4a7ee731be214c4a8bae30bb543d25ec58dccc0dcbaa69c201b6de9b735ac750',
//   '0xba347fded00d69f539ace7339ab945306b1d479bab5c686d73269abf9be8f3bc',
//   '0xf9a3eff9ec5d45bd9cd08ab6c358ec2ce9a6d2ba1d4ce056c3a05bc3ad3a0bb4',
//   '0xd446d4cffe874a60e33df66100bbba623a65c95afb8f5c07ad98d534f6b2d4e8',
//   '0x8ea16d975888a4b9091698f605303225930e1932a07fab6e412e5a4490197d98',
//   '0x0d4bce69dfa3795318a7855399afd3c5246b3cddbea5ac553b5219d1d6332a1d',
//   '0x1b5f12c0c26ab50f73fb86bffe9f11e6997aef948cb8aa536aa6dd7b12ceb775',
//   '0x7022509b1800e04e5a953c7efb20c67ba10600a66351684879c100698a93855e', // equal
//   '0xb00a347c2e536801071539fe75d30c4a3b62470c7f4e06ee8affe2388b2d2954',
//   '0x74b86c60699d6732a4e0b6cb0cf515692d04b6934b0dda8de4b1b4e96a9528a3',
//   '0xae0a45138c13b75a6efe514793451ab922b4b455376f6557e8183aab79b229ee',
//   '0x24ed757f295bb6a530ecc798ce9d82e6b7b9ef9932c0ae45c40c24ed280b8eae',
//   '0x11b28292e99853502159df1bab809970ab0561544fecc0f6dd112a2344f662f5',
//   '0xdd8425b65994c73f5be5e527fa10846f91d366ea74f1f8cb464dbc9ade047121',
//   '0xe1cbdfee8c15f4afb24a054cacef8e292d14285bd2e9283a1b50890ead12cfb2',
//   '0x8e0862a31da633035bc4fe987e476b6a6cfeb12fcadfa3822b46504b3e0b3161',
//   '0xfed85b0bdbde7c03f3b344f4b99b0a26d3414ea3c3087fb06d89d5a2fc96848c',
//   '0x9b993f37d94a9cc2f49d7660a61eabb64e4ac2fe3fb2b1f01d23fc893e14c0e0',
//   '0x4215375bc97cad4397bce16093011b24b89dd69a1cb4e0fe807ffa518350501a',
//   '0xe1024a96ce3853d217edec2688b055d8736d68693c458aba3b98c16d8fa144de',
//   '0xa6d30fd5c2f072961851f36ed90bb3b10e7614282d3a759132d4e54891919bfa',
//   '0x5ef5f2ef0833d2125948ac2f2fd4f6a0f30a9b368fc2e475aa12cfd16fd898d4',
//   '0x8bdb71236c935df99903919d4660ae7c26d9153e862bb62ea949bf918a9f8421',
//   '0x30fb23bae9fb37a4449eee90469f6df33f59cbd0c787c46746a964287d93fa2c',
//   '0x2d9ec4f2afbc0d0f0afdf1d7b1831a05e27a3983fe66fe2af6c60345562c15ab',
//   '0xf65fe64ed839e513772e07d778a857effda7b02bd52dcdea98e6086e33a7d6c7',
//   '0x551346479a09f855cbbee5b1189ef5db2f4b098e90c4d0ca8a0467480151de5c',
//   '0x942ccfb1c78d894882977a63ec6523340507aa2db5a423218752fb63d6f3571a',
// ];

let count = 0;
let equalIndexes = [];
for (let i = 0; i < transactionHashesFetched.length; i++) {
  const { input, value } = testBlock.transactions[i];

  if (calculatedHashes[i] === transactionHashesFetched[i]) {
    count++;
    equalIndexes.push('0x' + i.toString(16));
  }
  //   not all are true - but why?
  console.log(
    '0x' + i.toString(16),
    calculatedHashes[i] === transactionHashesFetched[i],
    calculatedHashes[i],
    transactionHashesFetched[i],
    testBlock.transactions[i].input === '0x' ? 'input = 0x' : value !== '0x0' ? 'Contract Call with ETH included' : '',
    input
  );

  //   console.log(transactionHashesFetched[i], calculatedHashes[i] === transactionHashesFetched[i], value);
}

console.log('\n---------------');
console.log(`Block ${parseInt(testBlock.number, 16)}`);
console.log('---------------');
console.log(`count: ${count}`);
console.log(`equalIndexes: ${equalIndexes}`);

export {};
